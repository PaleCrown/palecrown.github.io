define("loggingUtils/bi/errors.json",[],function(){return{SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED:{errorCode:111020,severity:"warning",params:{p2:"pageId",p1:"hostname",p3:"url",p4:"responseStatusCode"}},ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED:{errorCode:111021,severity:"fatal",params:{p1:"pageId"}},UNHANDLED_LINK_TYPE_IN_DATA_FIXER:{errorCode:21067,severity:"fatal",params:{p1:"newLinkDataItem"}}}});define("loggingUtils/bi/services/wixBI",["lodash","coreUtils"],function(a,b){"use strict";var c=typeof window!=="undefined";var d=c&&window.queryUtil&&window.queryUtil.isParameterTrue("isEdited");var e={biUrl:"//frog.wixpress.com",adapter:"",params:{}};var f=function(){if(!c){return true}var a=[/bot/i,/Google Web Preview/i,/^Mozilla\/4\.0$/];var b=window.navigator.userAgent;for(var d=0;d<a.length;++d){if(a[d].test(b)){return true}}return false}();var g=f?function(){}:function(a,b,c){var d=new window.Image;if(a.substr(-1)!=="/"){a+="/"}d.src=a+b+"?"+c};function h(b,c){var e=d&&c.adapter==="editor"?window.parent.mainLoaded:0;e=e||b.wixBiSession.initialTimestamp||b.wixBiSession.mainLoaded;return a.now()-e}function i(c,d){var f=a.get(c,["serviceTopology","biServerUrl"]);if(f){e.biUrl=f}a.defaults(d,e);var i;if(typeof d.queryString==="string"){i=d.queryString}else{i=b.urlUtils.toQueryString(a.defaults(d.params,{ts:h(c,d)}))}g(d.biUrl,d.adapter,i)}return{report:i}});define("loggingUtils/bi/services/googleAnalytics",["lodash","coreUtils"],function(a,b){"use strict";var c=200;function d(b,c,d){if(window._gaq){e()}else{requirejs(["https://stats.g.doubleclick.net/dc.js"],e,a.noop)}function e(){var e=window._gaq||[];window._gaq=e;a.forEach(c,function(a,c){var f=c===0?"":"t"+c+".";e.push([f+"_setAccount",a],[f+"_setAllowAnchor",true]);if(d){e.push([f+"_setCustomVar",1,"version",d.ver,1],[f+"_setCustomVar",2,"language",d.lng,1],[f+"_setCustomVar",3,"userType",d.userType,1])}e.push([f+"_trackPageview",b])})}}function e(b,c){if(a.isEmpty(b)){return}if(window.ga){c()}else{requirejs(["//www.google-analytics.com/analytics.js"],function(){window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)};window.ga.l=a.now();window.ga.q=window.ga.q||[];a.forEach(b,function(a){window.ga("create",a,"auto")});c()},a.noop)}}return{reportPageEvent:function(a,f,g,h){if(typeof window!=="undefined"){setTimeout(function(){if(a.isUsingUrlFormat(b.siteConstants.URL_FORMATS.SLASH)){e(g,function(){window.ga("send","pageview",{page:f})})}else{d(f,g,h)}},c)}},report:function(b){var c=a.tail(arguments);e(b,function(){window.ga.apply(window.ga,c)})}}});define("loggingUtils/bi/services/facebookRemarketing",["lodash","coreUtils"],function(a,b){"use strict";function c(a){if(window._fbq){return}var b=window._fbq||(window._fbq=[]);if(!b.loaded){var c=window.document.createElement("script");c.async=true;c.src="//connect.facebook.net/en_US/fbds.js";var d=window.document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);b.loaded=true}b.push(["addPixelId",a]);window._fbq.push(["track","PixelInitialized",{}])}function d(a){var b,c,d;if(!window.fbq){b=window.fbq=function(){if(b.callMethod){b.callMethod.apply(b,arguments)}else{b.queue.push(arguments)}};if(!window._fbq){window._fbq=b}b.push=b;b.loaded=true;b.version="2.0";b.queue=[];c=window.document.createElement("script");c.async=true;c.src="//connect.facebook.net/en_US/fbevents.js";d=window.document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}window.fbq("init",a);window.fbq("track","PageView")}function e(b){return Number(b)&&a.isString(b)&&!a.isEmpty(b)}function f(a){return a.isUsingUrlFormat(b.siteConstants.URL_FORMATS.SLASH)}return{initRemarketingPixel:function(a,b){if(!e(b)){return}if(f(a)){d(b)}else{c(b)}},initPixelId:function(a,b){if(!e(b)||!f(a)){return}this.initRemarketingPixel(a,b)},fireRemarketingPixel:function(b,c,d){if(f(b)&&window.fbq&&a.isString(c)){window.fbq("track",c,d||{})}}}});define("loggingUtils/bi/services/googleRemarketing",["lodash"],function(a){"use strict";var b=false;var c={google_custom_params:{},google_remarketing_only:true};function d(d){if(b||!e(d)){return}a.assign(c,{google_conversion_id:d[0]});f();b=true}function e(b){return a.isArray(b)&&b.length===1&&Number(b[0])}function f(){var a=window.document.createElement("script");a.type="text/javascript";a.src="//www.googleadservices.com/pagead/conversion_async.js";a.async=true;a.setAttribute("onload","google_trackConversion("+JSON.stringify(c)+")");var b=window.document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}function g(){if(b&&window.google_trackConversion){window.google_trackConversion(c)}}return{initRemarketingPixel:d,fireRemarketingPixel:g}});define("loggingUtils/bi/services/yandexMetrika",["lodash"],function(a){"use strict";var b="yandex_metrika_callbacks";var c=false;var d;function e(b){return a.isArray(b)&&a.isFinite(parseInt(b[0],10))}function f(a){d="yaCounter"+a}function g(a){(window[b]=window[b]||[]).push(function(){try{window[d]=new window.Ya.Metrika(i(a))}catch(a){}})}function h(){if(!c){var a=window.document.getElementsByTagName("script")[0];var b=window.document.createElement("script");b.type="text/javascript";b.async=true;b.src="https://mc.yandex.ru/metrika/watch.js";b.addEventListener("load",function(){c=true});a.parentNode.insertBefore(b,a)}}function i(a){return{id:parseInt(a,10),clickmap:true,trackLinks:true,accurateTrackBounce:true,webvisor:true,trackHash:true}}return{initialize:function(a){if(!e(a)){return}f(a[0]);g(a[0]);h()},reportPageHit:function(b){if(!c){return}if(window[d]&&a.isFunction(window[d].hit)){window[d].hit(b)}}}});define("loggingUtils/bi/bi",["loggingUtils/bi/services/wixBI","loggingUtils/bi/services/googleAnalytics","loggingUtils/bi/services/facebookRemarketing","loggingUtils/bi/services/googleRemarketing","loggingUtils/bi/services/yandexMetrika"],function(a,b,c,d,e){"use strict";return{wixBI:a,googleAnalytics:b,facebookRemarketing:c,googleRemarketing:d,yandexMetrika:e}});define("loggingUtils/logger/newrelic",["lodash"],function(a){"use strict";if(typeof window!=="undefined"&&!(window.queryUtil&&window.queryUtil.isParameterTrue("suppressbi"))){var b;try{b=window.parent.newrelic}catch(a){b=window.newrelic}if(b){var c=window.performance&&window.performance.now?function(){return Math.round(window.performance.now())}:function(){return 0};return{setCustomAttribute:b.setCustomAttribute.bind(b),addPageAction:function(d,e){var f=c();e=a.assign({},e,{timeSinceNavigate:f});return b.addPageAction(d,e)},finished:function(){var a=c();if(a){this.setCustomAttribute("timeSinceNavigate",c())}return b.finished.apply(b,arguments)}}}}return{setCustomAttribute:a.noop,addPageAction:a.noop,finished:a.noop}});define("loggingUtils/logger/performance",["lodash","loggingUtils/logger/newrelic"],function(a,b){"use strict";var c=" start";var d=" finish";function e(){return-1}var f=typeof window!=="undefined"&&window.queryUtil;if(!f||f.isParameterTrue("suppressperformance")){return{mark:a.noop,measure:a.noop,start:a.noop,startOnce:a.noop,finish:a.noop,time:function(a,b){return b.apply(this,Array.prototype.slice.call(arguments,2))},getMark:a.noop,getMeasure:a.noop,clearMarks:a.noop,clearMeasures:a.noop,now:a.now,getResourceSize:e}}var g,h=window.performance;if(h&&h.now){g=h.now.bind(h)}else{var i=window.wixBiSession&&window.wixBiSession.initialTimestamp||0;g=function(){return a.now()-i}}var j=function(c,d){if(c){d=a.defaults({measureName:c.name,startTime:Math.round(c.startTime),duration:Math.round(c.duration)},d);b.addPageAction("measure",d)}};var k;if(h&&h.measure){var l=function(b,c){return a.find(h.getEntriesByName(c),{entryType:b})};k={mark:h.mark.bind(h),measure:function(a,b,c,d,e){try{h.measure(a,b,c);if(d){j(k.getMeasure(a),e)}}catch(a){}},getMark:l.bind(this,"mark"),getMeasure:l.bind(this,"measure"),clearMarks:h.clearMarks.bind(h),clearMeasures:h.clearMeasures.bind(h)}}else{var m={domLoading:{name:"domLoading",startTime:0}};var n={};var o=function(a,b){if(b){delete a[b]}else{a={}}};k={mark:function(a){m[a]={name:a,startTime:g()}},measure:function(a,b,c,d,e){var f=k.getMark(b);var g=k.getMark(c);if(f&&g){var h={name:a,startTime:f.startTime,duration:g.startTime-f.startTime};if(!isNaN(h.duration)){n[a]=h;if(d){j(h,e)}}}},getMark:function(a){return m[a]},getMeasure:function(a){return n[a]},clearMarks:o.bind(this,m),clearMeasures:o.bind(this,n)}}k.start=function(a){k.clearMeasures(a);k.mark(a+c)};k.startOnce=function(a){if(!k.getMark(a+c)){k.start(a)}};k.finish=function(a,b,e){var f=a+c;if(k.getMark(f)){var g=a+d;k.mark(g);k.measure(a,f,g,b,e);k.clearMarks(g);k.clearMarks(f)}return k.getMeasure(a)};k.time=function(a,b,c,d){try{k.start(a);return b.apply(this,Array.prototype.slice.call(arguments,4))}finally{k.finish(a,c,d)}};k.now=g;if(h&&window.performance.getEntriesByName){k.getResourceSize=function(b){var c=h.getEntriesByName(b);if(c&&c.length){var d=c[0];var e=d.transferSize||d.encodedBodySize;if(a.isNumber(e)){return e}}return-1}}else{k.getResourceSize=e}return k});define("loggingUtils/logger/beat",["lodash","loggingUtils/bi/bi","coreUtils","loggingUtils/logger/performance","experiment"],function(a,b,c,d,e){"use strict";var f=[];var g={};if(typeof window!=="undefined"&&window.wixBiSession){g=window.wixBiSession;g.beat(5)}var h={};var i=["No Site Type","WixSite","UGC","Template"];var j=["No Event Type","start","reset","finish"];var k="NO_SV";var l=2e3;var m={adapter:"bt",biUrl:"http://frog.wix.com/"};var n={src:29,evid:3};var o=["url","ref"];var p={6:"packages loaded",7:"load data",8:"render",finish:"layout",16:"TPAs"};var q={16:20};function r(b){if(a.isString(b)){var c=b.split(".");if(c.length>1){return c[1]}}return b}function s(b){var d=c.urlUtils.toQueryString(a.omit(b,o),true);return a.reduce(o,function(a,d){return a+"&"+c.urlUtils.toQueryParam(d,b[d],true)},d)}function t(b,c,d,e){var f=u(b);var g=v(b,d,e);var h={et:A(d)};return a.merge({},c,f,g,h)}function u(a){return{vuuid:x(),vid:k,dc:r(a.serviceTopology.serverName),vsi:h[a.siteId].viewerSessionId,uuid:a.siteHeader.userId,sid:a.siteId,msid:a.getMetaSiteId()}}function v(b,c,d){var e=y(b,c);return{pid:d,pn:e,st:w(b),sr:C(),wr:D(),isjp:g.maybeBot?"1":"0",isp:b.isPremiumDomain(),url:B(b.currentUrl.full),ref:window.document.referrer,ts:z(b,c,e),c:a.now(),v:b.baseVersion||"unknown"}}function w(b){var c=b.rendererModel.siteInfo.documentType;var d=a.indexOf(i,c);return d!==-1?d:c}function x(){var b=c.cookieUtils.getCookie("_wixUIDX")||"";b=b.slice(a.lastIndexOf(b,"|")+1);b=b.replace(/^(null-user-id|null)$/g,"");return b}function y(a,b){if(b==="start"){h[a.siteId].pageNumber++}return h[a.siteId].pageNumber}function z(b,c,f){if(c==="start"){h[b.siteId].lastTimeStamp=a.now();return 0}if(f===1&&e.isOpen("beatLoadTime")){return Math.round(d.now())}return a.now()-h[b.siteId].lastTimeStamp}function A(b){var c=a.indexOf(j,b);if(c!==-1){return c}return b>3?b:-1}function B(a){return a.replace(/^http(s)?:\/\/(www\.)?/,"").substring(0,256)}function C(){var a=window.screen&&window.screen.width||0;var b=window.screen&&window.screen.height||0;return a+"x"+b}function D(){var a=0;var b=0;if(window.innerWidth){a=window.innerWidth;b=window.innerHeight}else if(window.document){if(window.document.documentElement&&window.document.documentElement.clientWidth){a=window.document.documentElement.clientWidth;b=window.document.documentElement.clientHeight}else if(window.document.body&&window.document.body.clientWidth){a=window.document.body.clientWidth;b=window.document.body.clientHeight}}return a+"x"+b}function E(a,b){g.et=b.et;a.wixBiSession.et=b.et}function F(a){return a>3&&a!==16}function G(a){var b=f[a];f[a]=true;return b}function H(a,b){return a&&a.wixBiSession.viewerSessionId&&a.viewMode!=="preview"&&!c.stringUtils.isTrue(a.currentUrl.query.suppressbi)&&A(b)!==-1&&(!F(b)||!G(b))}function I(a){h[a.siteId]=h[a.siteId]||{pageNumber:1,lastTimeStamp:a.wixBiSession.initialTimestamp||0,viewerSessionId:a.wixBiSession.viewerSessionId||c.guidUtils.getGUID()}}function J(a,b){return{queryString:s(b),adapter:m.adapter,biUrl:a.getServiceTopologyProperty("biServerUrl")||m.biUrl}}function K(a,b){var c=a.currentUrl.query.sampleratio;if(a.isDebugMode()&&c!=="force"||c==="none"||!b){return true}return Math.floor(a.wixBiSession.random*b)===0}function L(a,c){if(K(a,q[c.et])){var d=J(a,c);b.wixBI.report(a,d)}}function M(a,b,c){var d=setTimeout(function(){d=0;c(b)},l);a.subSvSession(function(a){if(d){clearTimeout(d);b.vid=a||k;c(b)}})}var N;function O(a,b,c){I(a);var e=t(a,n,b,c);E(a,e);if(H(a,b)){M(a,e,L.bind(null,a))}var f=a.viewMode;f=f==="site"?"":" "+f;if(!N){d.measure("main-r started"+f,"domLoading","beat 4",true);d.measure("utils loaded"+f,"beat 4","beat 5",true);N="beat 5"}var g="beat "+b;d.mark(g);var h=p[b]||b;d.measure(h+f,N,g,true);N=g}return{reportBeatEvent:O,shouldIncludeInSampleRatio:K}});define("loggingUtils/logger/logger",["lodash","loggingUtils/bi/bi","loggingUtils/logger/beat","coreUtils"],function(a,b,c,d){"use strict";var e=typeof window!=="undefined"&&window.queryUtil&&window.queryUtil.isParameterTrue("isEdited");var f=typeof window!=="undefined"&&!window.clientSideRender?4:3;var g=10;var h={errorName:"errn",errorCode:"errc",errc:"errc",src:"src",severity:"sev",sev:"sev",packageName:"errscp"};var i={recoverable:10,warning:20,error:30,fatal:40};var j={eventId:"evid",evid:"evid",src:"src"};var k={};function l(a){return typeof a==="string"?i[a]:a}function m(a){return{errn:a.errorName,evid:10,sev:l(a.severity),cat:e?1:2,iss:1,ut:d.cookieUtils.getCookie("userType")}}function n(b,c){var d=a.merge({src:44,sev:30,errn:"error_name_not_found"},v(b,h),m(b),u(b,c));if(c&&c.description){d.desc=JSON.stringify(c.description).slice(0,512)}return d}function o(b,c){return a.merge({src:42},v(b,j),u(b,c))}function p(b,c,d,e){var f;switch(c){case"error":f=n(d,e);break;case"event":f=o(d,e);break}return a.merge(f,s(b))}function q(a,b,c){var d=b.reportType||(b.errorCode||b.errc?"error":"event");return{biUrl:a.serviceTopology.biServerUrl,adapter:b.adapter||b.endpoint||(d==="error"?"trg":"ugc-viewer"),params:p(a,d,b,c)}}function r(a){var b=a.santaBase&&a.santaBase.match(/([\d\.]+)\/?$/);return b&&b[1]||""}function s(b){k[b.siteId]=k[b.siteId]||b.wixBiSession.viewerSessionId||d.guidUtils.getGUID();var c=b.serviceTopology.serverName?a.head(b.serviceTopology.serverName.split(".")):"";var g={did:b.siteId,msid:b.getMetaSiteId(),majorVer:f,ver:r(b),server:c,viewMode:b.viewMode};if(!e){g.vsi=k[b.siteId]}return g}function t(a){return typeof a==="string"?encodeURIComponent(a):a}function u(b,c){var d={};var e=b.params;if(a.isArray(e)){d=a.pick(c,e)}else if(a.isObject(e)){d=a.mapValues(e,function(a){return t(c[a])})}else{d=a.mapValues(c,t)}return d}function v(b,c){return a.transform(b,function(a,b,d){var e=c[d];if(e){a[e]=b}},{})}function w(a){return d.stringUtils.isTrue(a.currentUrl.query.suppressbi)}function x(a){if(!a){return false}a.callCount=a.callCount||0;a.callCount++;return a.callLimit&&a.callCount>a.callLimit}function y(a,b){if(a.forceBI){return true}var d=g;if(b){if(a.isWixSite()&&"wixSiteSampleRatio"in b){d=b.wixSiteSampleRatio}else if("sampleRatio"in b){d=b.sampleRatio}else if("errorCode"in b||b.endpoint==="editor"){d=0}}if(d&&d>=1){return c.shouldIncludeInSampleRatio(a,d)}return true}function z(a,b){return!w(a)&&!x(b)&&y(a,b)}function A(c,d,e){if(!c||!a.isObject(d)){return}if(z(c,d)){var f=q(c,d,e);b.wixBI.report(c,f)}}function B(a){return k[a.siteId]}function C(a,b){var c=[];var d=a.isPremiumDomain();switch(b){case"googleAnalytics":{if(D(a,b)){c.push(a.googleAnalytics)}break}case"facebookRemarketing":{if(D(a,b)&&d){c.push(a.facebookRemarketing)}break}case"googleRemarketing":{if(D(a,b)&&d){c.push(a.googleRemarketing)}break}case"yandexMetrika":{if(D(a,b)&&d){c.push(a.yandexMetrika)}break}}return c}function D(b,c){return!a.isEmpty(b[c])}function E(a){if(!e&&!w(a)){var c=C(a,"facebookRemarketing")[0];b.facebookRemarketing.initRemarketingPixel(a,c)}}function F(a,c){if(!e&&!w(a)){b.facebookRemarketing.initPixelId(a,c)}}function G(a,c,d){b.facebookRemarketing.fireRemarketingPixel(a,c,d)}function H(a){if(!e&&!w(a)){b.googleRemarketing.initRemarketingPixel(C(a,"googleRemarketing"))}}function I(){b.googleRemarketing.fireRemarketingPixel()}function J(a){if(!e&&!w(a)){b.yandexMetrika.initialize(C(a,"yandexMetrika"))}}function K(a){b.yandexMetrika.reportPageHit(a)}function L(c,d){if(c&&a.isString(d)&&!e&&!w(c)){b.googleAnalytics.reportPageEvent(c,d,C(c,"googleAnalytics"))}}function M(c){if(!e){var d=C(c,"googleAnalytics");b.googleAnalytics.report.apply(null,[d].concat(a.tail(arguments)))}}function N(b,c,d){a.forOwn(d,function(a){a.packageName=b})}return{reportBI:A,reportGoogleAnalytics:M,reportPageEvent:L,register:N,reportBeatEvent:c.reportBeatEvent,initFacebookRemarketingUserPixel:E,initFacebookRemarketingPixelId:F,fireFacebookRemarketingPixel:G,initGoogleRemarketingPixel:H,fireGoogleRemarketingPixel:I,initYandexMetrika:J,reportYandexPageHit:K,shouldSendReport:z,getVisitorId:B}});define("loggingUtils/bi/errors",["loggingUtils/bi/errors.json","lodash","loggingUtils/logger/logger"],function(a,b,c){"use strict";b.forEach(a,function(a,b){a.errorName=b});c.register("utils","error",a);return a});define("loggingUtils/log/log",["lodash","coreUtils"],function(a,b){"use strict";var c=console.log.bind(console);var d="DocumentServices|Deprecated|";var e=typeof window==="undefined"?true:b.urlUtils.parseUrl(a.get(window,["location","href"],"")).query.debug==="all";var f=e?c:a.noop;return{verbose:f,info:c,warn:console.warn.bind(console),error:console.error.bind(console),warnDeprecation:function(a){if(e){console.error.call(console,d+a)}}}});define("loggingUtils/logger/services/imageContext",["lodash","loggingUtils/logger/performance","experiment"],function(a,b,c){"use strict";var d=10;var e=parseInt(c.getValue("viewPortImageLoadingBi"),10);if(!(e>0)){e=5e3}var f={INITIAL:0,PROGRESS:1,FINISH:2};function g(){this._contexts={};this._pageNumber=0;this._lastPageId=""}g.prototype={_getPageNumber:function(a){if(this._lastPageId!==a){this._pageNumber++;this._lastPageId=a}return this._pageNumber},createImageContext:function(a,b,c,d){var e=this._getPageNumber(a);return this._contexts[e]=new h({pageId:a,pageNumber:e},{onProgress:b,onSuccess:c,onFail:d})},getImageContext:function(a){return this._contexts[this._getPageNumber(a)]},getCurrentImageContext:function(){return this._contexts[this._pageNumber]}};function h(b,c){this._pageId=b.pageId;this._pageNumber=b.pageNumber;this._onProgress=c.onProgress||a.noop;this._onSuccess=c.onSuccess||a.noop;this._onFail=c.onFail||a.noop;this._interval=0;this._failDetailsBuffer=[];this._status=f.INITIAL;this._images={total:0,success:0,fail:0,failDetails:[],totalSize:0}}h.prototype={_isFinished:function(){return this._images.total===this._images.success+this._images.fail},_isFinishSuccess:function(){return this._isFinished()&&this._images.fail===0},_checkFinished:function(){if(this._isFinished()){this._finish();if(this._isFinishSuccess()){this._onSuccess(this)}else{this._onFail(this)}}},_startProgress:function(a){var b=this;var c=1;this._interval=setInterval(function(){b._images.failDetails.push(b._failDetailsBuffer);b._failDetailsBuffer=[];a(c++);if(c>d){b._finish()}},e)},_stopProgress:function(){if(this._interval){clearInterval(this._interval);this._interval=0}},_finish:function(){this._status=f.FINISH;if(this._failDetailsBuffer.length){this._images.failDetails.push(this._failDetailsBuffer);this._failDetailsBuffer=[]}this._stopProgress()},getImages:function(){return this._images},getPageId:function(){return this._pageId},getPageNumber:function(){return this._pageNumber},init:function(a){if(this._status!==f.INITIAL){return}this._images.total=a;if(a===0){this._checkFinished()}else{this._status=f.PROGRESS;this._startProgress(this._onProgress.bind(null,this))}},increaseSuccessCount:function(a){if(this._status===f.PROGRESS){this._images.success++;this._images.totalSize+=a;this._checkFinished()}},increaseFailCount:function(a){if(this._status===f.PROGRESS){this._images.fail++;this._failDetailsBuffer.push({d:Math.round(b.now()),url:a});this._checkFinished()}},kill:function(){this._finish()}};var i={_sites:{},create:function(a){return this._sites[a.siteId]=this._sites[a.siteId]||new g},get:function(a){return this._sites[a.siteId]}};return{create:function(a,b,c,d){return i.create(a).createImageContext(a.getCurrentUrlPageId(),b.bind(null,a),c.bind(null,a),d.bind(null,a))},get:function(a){var b=i.get(a);return b&&b.getImageContext(a.getCurrentUrlPageId())},getCurrent:function(a){var b=i.get(a);return b&&b.getCurrentImageContext()},getSiteContext:function(a){return i.get(a)}}});define("loggingUtils/logger/imagesBi",["lodash","loggingUtils/bi/bi","coreUtils","loggingUtils/logger/beat","loggingUtils/logger/performance","loggingUtils/logger/services/imageContext"],function(a,b,c,d,e,f){"use strict";var g=8;var h=/\/(v[0-9.]+\/.+)$/;var i=/\/([^\/]+)$/;function j(b){if(a.isString(b)){var c=b.match(h);if(!c){c=b.match(i);if(!c){return""}}return c[1]}return""}function k(a,b){var d=b.getImages();var f=d.totalSize>=0?Math.round(d.totalSize/1024):"";return{src:29,d:Math.round(e.now()),tn:d.total,sid:a.siteId,msid:a.getMetaSiteId(),pid:b.getPageId(),pn:b.getPageNumber(),vsi:a.wixBiSession.viewerSessionId,vid:c.cookieUtils.getCookie("svSession"),s:f}}function l(b,d,e){var f=a.defaults(k(b,d),e);return{adapter:"m",queryString:c.urlUtils.toQueryString(f)}}function m(a,c,d){var e=c.getImages();b.wixBI.report(a,l(a,c,{evid:11,i:d,sn:e.success,fn:e.fail,fd:JSON.stringify({a:e.failDetails[d-1]})}))}function n(a,c){b.wixBI.report(a,l(a,c,{evid:12}))}function o(c,d){var e=d.getImages();b.wixBI.report(c,l(c,d,{evid:13,fn:e.fail,fd:JSON.stringify({a:a(e.failDetails).flatten().take(g).value()})}))}function p(a){return d.shouldIncludeInSampleRatio(a)&&!c.stringUtils.isTrue(a.currentUrl.query.suppressbi)}function q(a,b){if(p(a)){var c=f.create(a,m,n,o);c.init(b)}}function r(a,b){var c=f.get(a);if(c){var d=e.getResourceSize(b.target.src);c.increaseSuccessCount(d)}}function s(a,b){var c=f.get(a);if(c){var d=j(b.target.src);c.increaseFailCount(d)}}function t(a){return!f.getSiteContext(a)}return{init:q,increaseSuccessCount:r,increaseFailCount:s,notCounting:t}});define("loggingUtils",["loggingUtils/bi/errors","loggingUtils/logger/logger","loggingUtils/log/log","loggingUtils/logger/performance","loggingUtils/logger/newrelic","loggingUtils/logger/imagesBi"],function(a,b,c,d,e,f){"use strict";var g={bi:{errors:a},logger:b,log:c,performance:d,newrelic:e,imagesBi:f};return g});