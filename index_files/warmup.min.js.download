define("warmup/lib/indicator",[],function(){"use strict";var a;var b={INITIAL:"initial",LAYOUT:"layout",SUCCESS:"success",FAIL:"fail"};function c(){d();e();f(b.INITIAL)}function d(){var a=window.document.createElement("style");a.appendChild(window.document.createTextNode(""));window.document.body.appendChild(a);a.sheet.insertRule("#warmup-indicator { width: 120px; height: 20px; line-height: 20px; font-size: 15px; position: fixed; bottom: 0; left: 0; z-index: 2147483647; border: 2px solid black; text-align: center; border-radius: 4px; text-transform: capitalize; background-color: yellow; }",0);a.sheet.insertRule("#warmup-indicator.layout { background-color: orange; }",0);a.sheet.insertRule("#warmup-indicator.success { background-color: green; }",0);a.sheet.insertRule("#warmup-indicator.fail { background-color: red; }",0)}function e(){a=window.document.createElement("div");a.setAttribute("id","warmup-indicator");window.document.body.appendChild(a)}function f(b){if(!a){return}a.innerHTML=b;a.setAttribute("class",b)}return{init:c,updateState:f,STATES:b}});define("warmup/lib/layout",["lodash","siteUtils","wixUrlParser","warmup/lib/indicator","layout"],function(a,b,c,d,e){"use strict";function f(f,h){h=h||a.noop;var i=new b.SiteData(a.assign({},f,{pagesData:window.warmupData.pagesData}));var j=c.parseUrl(i,i.currentUrl.full);var k=j.pageId;var l={inner:{structure:i.pagesData[k].structure,pageId:k,getDomNodeFunc:g},outer:{structure:i.pagesData.masterPage.structure,pageId:"masterPage",getDomNodeFunc:g}};var m={getSiteData:function(){return i},getAllRenderedRootIds:function(){return["masterPage",k]},getRuntimeDal:function(){return{getCompData:function(){return null},getCompDesign:function(){return null},getCompProps:function(){return null},getActionsAndBehaviors:function(){return null}}}};i.anchorsMap=window.warmupData.anchorsMap;e.reLayout(l,m);g("masterPage").style.visibility="";g(j.pageId).style.visibility="";d.updateState(d.STATES.LAYOUT);h()}function g(){var b=a.toArray(arguments);var c=b.join("");var d=window.document.getElementById(c);if(!d){var e=b[0];var f=b.slice(1).map(function(a){return a.replace(e,"")}).join("");d=window.document.getElementById(e+f)}return d}return{runLayout:f}});define("warmup/lib/iframes",["lodash"],function(a){"use strict";var b=[];function c(){var a=e();a.forEach(function(a){b.push({ref:a,isLoaded:false});a.addEventListener("load",f,false)})}function d(){b.forEach(function(a){a.ref.removeEventListener("load",f)})}function e(){return window.document.querySelectorAll("iframe[data-src]")}function f(){var c=a.filter(b,{ref:this})[0];c.isLoaded=true}function g(){d();a(b).filter(function(a){return a.isLoaded&&typeof a.ref.onload==="function"}).forEach(function(a){a.ref.onload()});b=null}return{registerIframesOnLoad:c,flushEvents:g}});define("warmup",["zepto","coreUtils","warmup/lib/layout","warmup/lib/indicator","warmup/lib/iframes"],function(a,b,c,d,e){"use strict";function f(f,g){a(function(){if(b.urlUtils.isTrue("ssrindicator")){d.init()}e.registerIframesOnLoad();c.runLayout(f,g)})}return{init:f,indicator:d,iframes:e}});